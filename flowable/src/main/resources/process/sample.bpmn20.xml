<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:flowable="http://flowable.org/bpmn"
             typeLanguage="http://www.w3.org/2001/XMLSchema"
             expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.flowable.org/processdef">

    <process id="sample" name="sample" isExecutable="true">
        <documentation>Example</documentation>

        <startEvent id="startEvent"/>

        <userTask id="typeInfo" name="typeInfo" flowable:candidateGroups="group_auth"/>

        <serviceTask id="userAuth" name="userAuth"
                     flowable:class="org.liuyehcf.flowalbe.delegate.UserAuthentication"/>

        <exclusiveGateway id="authExclusiveGateway"/>

        <userTask id="shopping" name="shopping" flowable:candidateGroups="group_shopping"/>

        <serviceTask id="checkout" name="checkout"
                     flowable:class="org.liuyehcf.flowalbe.delegate.Checkout"/>

        <endEvent id="endEvent"/>

        <sequenceFlow id="flow1" sourceRef="startEvent" targetRef="typeInfo"/>
        <sequenceFlow id="flow2" sourceRef="typeInfo" targetRef="userAuth"/>
        <sequenceFlow id="flow3" sourceRef="userAuth" targetRef="authExclusiveGateway"/>
        <sequenceFlow id="flow4" sourceRef="authExclusiveGateway" targetRef="typeInfo">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[
                    ${!approved}
                ]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow5" sourceRef="authExclusiveGateway" targetRef="shopping">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[
                    ${approved}
                ]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow6" sourceRef="shopping" targetRef="checkout"/>
        <sequenceFlow id="flow7" sourceRef="checkout" targetRef="endEvent"/>
    </process>
</definitions>